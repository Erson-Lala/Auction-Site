{"ast":null,"code":"var _jsxFileName = \"E:\\\\Freelancing\\\\Test\\\\React-Firebase-Auth-master\\\\src\\\\components\\\\biding\\\\Bid.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport NavBar from '../NavBar';\nimport { Card } from \"react-bootstrap\";\nimport '../newAuction/newAuctionStyle.css';\nimport './bidStyle.css';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { useLocation } from 'react-router-dom';\nimport { doc, updateDoc, getDoc } from 'firebase/firestore';\nimport { db } from '../../firebase';\nexport default function Bid() {\n  const location = useLocation();\n  const auctionItemData = location.state.auctionItemData;\n  const AuctionItemID = location.state.ItemId;\n  const [newBid, setNewBid] = useState();\n  const [userData, setUserData] = useState();\n  const userId = JSON.parse(localStorage.getItem(\"UserID\"));\n  console.log(\"The User Id is\", userId);\n  useEffect(() => {\n    const docRef = doc(db, 'Users', userId);\n    getDoc(docRef).then(doc => {\n      setUserData(doc.data());\n    });\n  }, []);\n\n  const handleEnterBid = async () => {\n    if (parseFloat(auctionItemData.topBid) >= parseFloat(newBid)) {\n      toast.error(\"Your bid is less than top bid \");\n      return;\n    }\n\n    if (userData.wallet < parseFloat(newBid)) {\n      toast.error(\"Your wallet balance is insufficient\");\n      return;\n    }\n\n    try {\n      const docRef = doc(db, 'Auction', AuctionItemID);\n      await updateDoc(docRef, {\n        topBid: newBid\n      });\n      toast.success(\"Your bid is now highest\");\n    } catch (e) {\n      toast.error(\"Server encounter an unexception condition\");\n    }\n\n    const newBalance = userData.wallet - parseFloat(newBid); // The User Wallet Balnce handle\n\n    try {\n      const docRef = doc(db, 'Users', userId);\n      await updateDoc(docRef, {\n        wallet: newBalance\n      });\n      setInterval(() => {\n        toast.success(`Your remaining balance is: ${newBalance}`);\n        return;\n      }, 1000);\n    } catch (e) {\n      toast.error(\"Server encounter an unexception condition\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NavBar, {\n    title: auctionItemData.productName,\n    createdBy: auctionItemData.sellerName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: \"w-100\",\n    style: {\n      maxWidth: \"1200px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"time_tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 26\n    }\n  }, \"Time Remaining: \", auctionItemData.timeRemaining, \" Days\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 26\n    }\n  }, auctionItemData.Description), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"biding_information\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"hieghest_bid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 36\n    }\n  }, \"Current High Bid\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"hieghest_bid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 36\n    }\n  }, auctionItemData.topBid)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"hieghest_bid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 36\n    }\n  }, \"By:  \", auctionItemData.topBidUser))), /*#__PURE__*/React.createElement(\"footer\", {\n    className: \"Input_Box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"your_Bid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 31\n    }\n  }, \"Your Bid:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter your Bid\",\n    className: \"input_for_new_bids\",\n    onChange: e => {\n      setNewBid(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-sm btn-success bid_button\",\n    onClick: () => handleEnterBid(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 31\n    }\n  }, \"Enter Bid\")))), /*#__PURE__*/React.createElement(Toaster, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 16\n    }\n  }));\n}","map":{"version":3,"sources":["E:/Freelancing/Test/React-Firebase-Auth-master/src/components/biding/Bid.js"],"names":["React","useState","useEffect","Container","NavBar","Card","toast","Toaster","useLocation","doc","updateDoc","getDoc","db","Bid","location","auctionItemData","state","AuctionItemID","ItemId","newBid","setNewBid","userData","setUserData","userId","JSON","parse","localStorage","getItem","console","log","docRef","then","data","handleEnterBid","parseFloat","topBid","error","wallet","success","e","newBalance","setInterval","productName","sellerName","maxWidth","timeRemaining","Description","topBidUser","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport NavBar from '../NavBar'\r\nimport { Card } from \"react-bootstrap\"\r\nimport '../newAuction/newAuctionStyle.css'\r\nimport './bidStyle.css'\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { useLocation } from 'react-router-dom'\r\nimport { doc, updateDoc ,getDoc} from 'firebase/firestore'\r\nimport { db } from '../../firebase'\r\nexport default function Bid() {\r\n\r\n     const location            = useLocation();\r\n     const auctionItemData     = location.state.auctionItemData\r\n     const AuctionItemID       = location.state.ItemId\r\n     const [newBid, setNewBid] = useState()\r\n     const [userData, setUserData] = useState()\r\n     const userId              = JSON.parse(localStorage.getItem(\"UserID\"))\r\n     console.log(\"The User Id is\",userId)\r\n     useEffect(() => {\r\n          const docRef = doc(db, 'Users', userId)\r\n          getDoc(docRef)\r\n           .then((doc) => {\r\n               setUserData(doc.data())\r\n           })\r\n     }, [])    \r\n     const handleEnterBid = async () => {\r\n          if (parseFloat(auctionItemData.topBid) >= parseFloat(newBid)) {\r\n               toast.error(\"Your bid is less than top bid \")\r\n               return\r\n          }\r\n          if (userData.wallet< parseFloat(newBid)){\r\n               toast.error(\"Your wallet balance is insufficient\")\r\n               return\r\n          }\r\n          try {\r\n               const docRef = doc(db, 'Auction', AuctionItemID)\r\n               await updateDoc(docRef, {\r\n                    topBid: newBid\r\n               })\r\n               toast.success(\"Your bid is now highest\")\r\n          } catch (e) {\r\n               toast.error(\"Server encounter an unexception condition\")\r\n          }\r\n          const newBalance = userData.wallet-parseFloat(newBid)\r\n          // The User Wallet Balnce handle\r\n          try {\r\n               const docRef = doc(db, 'Users', userId)\r\n               await updateDoc(docRef, {\r\n                    wallet: newBalance\r\n               })\r\n               setInterval(()=> {\r\n                    toast.success(`Your remaining balance is: ${newBalance}`)\r\n                    return\r\n                  },1000)\r\n          } catch (e) {\r\n               toast.error(\"Server encounter an unexception condition\")\r\n          }\r\n     }\r\n     return (\r\n          <Container>\r\n               <NavBar title={auctionItemData.productName} createdBy={auctionItemData.sellerName} />\r\n               <Card className=\"w-100\" style={{ maxWidth: \"1200px\" }}>\r\n                    <Card.Body>\r\n                         <h6 className='time_tag'>Time Remaining: {auctionItemData.timeRemaining} Days</h6>\r\n                         <p>{auctionItemData.Description}</p>\r\n                         <div className=\"biding_information\">\r\n                              <div>\r\n                                   <p className='hieghest_bid'>Current High Bid</p>\r\n                                   <p className='hieghest_bid'>{auctionItemData.topBid}</p>\r\n                              </div>\r\n                              <div>\r\n                                   <p className='hieghest_bid'>By:  {auctionItemData.topBidUser}</p>\r\n                              </div>\r\n                         </div>\r\n                         <footer className='Input_Box'>\r\n                              <label className='your_Bid'>Your Bid:</label>\r\n                              <input type='text' placeholder='Enter your Bid' className='input_for_new_bids' onChange={(e) => { setNewBid(e.target.value) }}></input>\r\n                              <button type=\"button\" className=\"btn btn-sm btn-success bid_button\" onClick={() => handleEnterBid()}>Enter Bid</button>\r\n                         </footer>\r\n                    </Card.Body>\r\n               </Card>\r\n               <Toaster/>\r\n          </Container>\r\n     )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}