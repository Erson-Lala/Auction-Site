{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\Freelancing\\\\Test\\\\React-Firebase-Auth-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\Freelancing\\\\Test\\\\React-Firebase-Auth-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\Freelancing\\\\Test\\\\React-Firebase-Auth-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Container,Table}from'react-bootstrap';import{Link,useNavigate}from'react-router-dom';import{collection,getDocs,doc,getDoc,deleteDoc}from\"firebase/firestore\";import toast,{Toaster}from'react-hot-toast';import{db}from'../../firebase';import'./homeStyle.css';import NavBar from'../NavBar';export default function Home(){var userDetail=JSON.parse(localStorage.getItem('User'));var history=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),array=_useState2[0],setArray=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loader=_useState6[0],setLoader=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),ItemId=_useState8[0],setItemId=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),userData=_useState10[0],setUserData=_useState10[1];var userId=JSON.parse(localStorage.getItem(\"UserID\"));var list=[];var Ids=[];useEffect(function(){//Get all the Data from the Firebase\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var querySnapshot;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getDocs(collection(db,\"Auction\"));case 3:querySnapshot=_context.sent;querySnapshot.forEach(function(doc,index){list.push(doc.data());Ids.push(doc.id);});setItemId(Ids);setData(list);setLoader(false);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(\"The error is\",_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();// Fetch Single User Data\nvar docRef=doc(db,'Users',userId);getDoc(docRef).then(function(doc){setUserData(doc.data());});},[]);useEffect(function(){var d;data.map(function(ls,index){var date_1=new Date(ls.endDateforBiding);var date_2=new Date();var days=function days(date_1,date_2){var difference=date_1.getTime()-date_2.getTime();var TotalDays=Math.ceil(difference/(1000*3600*24));ls.endDateforBiding=TotalDays;ls.ItemFirebaseId=ItemId[index];};days(date_1,date_2);});setArray(data.sort(function(first_Argument,second_Argument){return parseFloat(first_Argument.endDateforBiding)-parseFloat(second_Argument.endDateforBiding);}));},[data]);var handleItem=function handleItem(e,i){// history.push({\n//      pathname: \"/bid\",\n//      state: { auctionItemData: e, ItemId: e.ItemFirebaseId }\n// });\n};var handleDelete=function handleDelete(Item){var docRef=doc(db,'Auction',Item.ItemFirebaseId);deleteDoc(docRef).then(function(){toast.success(\"Item has deleted\");}).catch(function(e){toast.error(\"Server encounter an unexception condition\");});setArray(array.filter(function(ls){return ls.ItemFirebaseId!=Item.ItemFirebaseId;}));};return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(NavBar,{title:\"Current Auction\"}),loader?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-grow d-flex \",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Product\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Seller\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Top Bid\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Time Remaining\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Delete\"))),array&&array.map(function(item,index){return/*#__PURE__*/ (// Conditional rendering if Date has passed\nReact.createElement(React.Fragment,null,item.endDateforBiding<=0?null:/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/bid\",state:{auctionItemData:item,ItemId:item.ItemFirebaseId},style:{textDecoration:\"none\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"product\"},item.productName))),/*#__PURE__*/React.createElement(\"td\",null,item.sellerName),/*#__PURE__*/React.createElement(\"td\",null,item.topBid),/*#__PURE__*/React.createElement(\"td\",null,item.endDateforBiding),/*#__PURE__*/React.createElement(\"td\",null,userDetail.userId===item.sellerID?/*#__PURE__*/React.createElement(\"span\",{className:\"delete\",onClick:function onClick(){return handleDelete(item);}},\"Delete\"):null))));}))),/*#__PURE__*/React.createElement(\"footer\",{className:\"lower_Home_Page\"},/*#__PURE__*/React.createElement(Link,{to:\"/newAuction\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\"},\"New Auction\")),/*#__PURE__*/React.createElement(\"p\",null,\"Your current wallet: \",/*#__PURE__*/React.createElement(\"span\",{className:\"wallet\"},userData===null||userData===void 0?void 0:userData.wallet,\"$\"))))),/*#__PURE__*/React.createElement(Toaster,null));}","map":{"version":3,"sources":["E:/Freelancing/Test/React-Firebase-Auth-master/src/components/home/Home.js"],"names":["React","useEffect","useState","Container","Table","Link","useNavigate","collection","getDocs","doc","getDoc","deleteDoc","toast","Toaster","db","NavBar","Home","userDetail","JSON","parse","localStorage","getItem","history","array","setArray","data","setData","loader","setLoader","ItemId","setItemId","userData","setUserData","userId","list","Ids","fetchData","querySnapshot","forEach","index","push","id","console","log","docRef","then","d","map","ls","date_1","Date","endDateforBiding","date_2","days","difference","getTime","TotalDays","Math","ceil","ItemFirebaseId","sort","first_Argument","second_Argument","parseFloat","handleItem","e","i","handleDelete","Item","success","catch","error","filter","item","auctionItemData","textDecoration","productName","sellerName","topBid","sellerID","wallet"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Container, Table } from 'react-bootstrap';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { collection, getDocs, doc, getDoc, deleteDoc } from \"firebase/firestore\";\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { db } from '../../firebase';\r\nimport './homeStyle.css'\r\nimport NavBar from '../NavBar';\r\nexport default function Home() {\r\n     const userDetail = JSON.parse(localStorage.getItem('User'))\r\n     const history = useNavigate()\r\n     const [array, setArray] = useState([])\r\n     const [data, setData] = useState([])\r\n     const [loader, setLoader] = useState(true)\r\n     const [ItemId, setItemId] = useState([])\r\n     const [userData, setUserData] = useState()\r\n     const userId = JSON.parse(localStorage.getItem(\"UserID\"))\r\n     let list = []\r\n     let Ids = []\r\n\r\n     useEffect(() => {\r\n\r\n\r\n          //Get all the Data from the Firebase\r\n          const fetchData = async () => {\r\n               try {\r\n                    const querySnapshot = await getDocs(collection(db, \"Auction\"));\r\n                    querySnapshot.forEach((doc, index) => {\r\n                         list.push(doc.data())\r\n                         Ids.push(doc.id)\r\n                    })\r\n                    setItemId(Ids)\r\n                    setData(list)\r\n                    setLoader(false)\r\n               } catch (error) {\r\n                    console.log(\"The error is\", error)\r\n               }\r\n\r\n          }\r\n          fetchData()\r\n\r\n          // Fetch Single User Data\r\n          const docRef = doc(db, 'Users', userId)\r\n          getDoc(docRef)\r\n               .then((doc) => {\r\n                    setUserData(doc.data())\r\n               })\r\n     }, [])\r\n     useEffect(() => {\r\n          var d;\r\n          data.map((ls, index) => {\r\n               let date_1 = new Date(ls.endDateforBiding);\r\n               let date_2 = new Date();\r\n\r\n               const days = (date_1, date_2) => {\r\n                    let difference = date_1.getTime() - date_2.getTime();\r\n                    let TotalDays = Math.ceil(difference / (1000 * 3600 * 24));\r\n                    ls.endDateforBiding = TotalDays;\r\n                    ls.ItemFirebaseId = ItemId[index];\r\n               }\r\n               days(date_1, date_2)\r\n          })\r\n\r\n          setArray(data.sort((first_Argument, second_Argument) => parseFloat(first_Argument.endDateforBiding) - parseFloat(second_Argument.endDateforBiding)));\r\n     }, [data])\r\n\r\n     const handleItem = (e, i) => {\r\n\r\n          // history.push({\r\n          //      pathname: \"/bid\",\r\n          //      state: { auctionItemData: e, ItemId: e.ItemFirebaseId }\r\n          // });\r\n     }\r\n     const handleDelete = (Item) => {\r\n          const docRef = doc(db, 'Auction', Item.ItemFirebaseId)\r\n          deleteDoc(docRef)\r\n               .then(() => {\r\n                    toast.success(\"Item has deleted\")\r\n               })\r\n               .catch((e) => {\r\n                    toast.error(\"Server encounter an unexception condition\")\r\n               })\r\n          setArray(array.filter((ls)=> ls.ItemFirebaseId != Item.ItemFirebaseId))\r\n}\r\n\r\nreturn (\r\n\r\n\r\n     <Container>\r\n          <main>\r\n               <NavBar title=\"Current Auction\" />\r\n               {\r\n                    loader ?\r\n                         <div class=\"d-flex justify-content-center align-items-center\">\r\n                              <div class=\"spinner-grow d-flex \" role=\"status\">\r\n                                   <span class=\"sr-only\">Loading...</span>\r\n                              </div>\r\n                         </div>\r\n                         :\r\n                         <>\r\n                              <Table striped bordered hover >\r\n                                   <tbody>\r\n                                        <tr>\r\n                                             <td><b>Product</b></td>\r\n                                             <td><b>Seller</b></td>\r\n                                             <td><b>Top Bid</b></td>\r\n                                             <td><b>Time Remaining</b></td>\r\n                                             <td><b>Delete</b></td>\r\n\r\n\r\n                                        </tr>\r\n                                        {\r\n                                             array && array.map((item, index) =>\r\n                                                  // Conditional rendering if Date has passed\r\n                                                  <>\r\n                                                       {(item.endDateforBiding <= 0) ?\r\n                                                            null\r\n                                                            :\r\n                                                            <tr key={index}>\r\n\r\n                                                                 <td ><Link to='/bid' state={{auctionItemData: item, ItemId: item.ItemFirebaseId}} style={{textDecoration: \"none\"}}><span className=\"product\">{item.productName}</span></Link></td>\r\n                                                                 <td>{item.sellerName}</td>\r\n                                                                 <td>{item.topBid}</td>\r\n                                                                 <td>{item.endDateforBiding}</td>\r\n                                                                 <td>{userDetail.userId === item.sellerID ? <span className=\"delete\" onClick={() => handleDelete(item)}>Delete</span> : null}</td>\r\n                                                            </tr>\r\n                                                       }\r\n                                                  </>\r\n                                             )\r\n                                        }\r\n                                   </tbody>\r\n                              </Table>\r\n                              <footer className='lower_Home_Page'>\r\n                                   <Link to='/newAuction'><button type=\"button\" className=\"btn btn-primary\">New Auction</button></Link>\r\n                                   <p>Your current wallet: <span className='wallet'>{userData?.wallet}$</span></p>\r\n                              </footer>\r\n                         </>\r\n               }\r\n\r\n          </main>\r\n          <Toaster />\r\n     </Container>\r\n);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}