{"ast":null,"code":"var _jsxFileName = \"E:\\\\Freelancing\\\\Test\\\\React-Firebase-Auth-master\\\\src\\\\components\\\\home\\\\Home.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Container, Table } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { collection, getDocs, doc, getDoc, deleteDoc } from \"firebase/firestore\";\nimport toast, { Toaster } from 'react-hot-toast';\nimport { db } from '../../firebase';\nimport './homeStyle.css';\nimport NavBar from '../NavBar';\nexport default function Home() {\n  const userDetail = JSON.parse(localStorage.getItem('User'));\n  const [array, setArray] = useState([]);\n  const [data, setData] = useState([]);\n  const [loader, setLoader] = useState(true);\n  const [ItemId, setItemId] = useState([]);\n  const [userData, setUserData] = useState();\n  const userId = JSON.parse(localStorage.getItem(\"UserID\"));\n  let list = [];\n  let Ids = [];\n  useEffect(() => {\n    //Get all the Data from the Firebase\n    const fetchData = async () => {\n      try {\n        const querySnapshot = await getDocs(collection(db, \"Auction\"));\n        querySnapshot.forEach((doc, index) => {\n          list.push(doc.data());\n          Ids.push(doc.id);\n        });\n        setItemId(Ids);\n        setData(list);\n        setLoader(false);\n      } catch (error) {\n        console.log(\"The error is\", error);\n      }\n    };\n\n    fetchData(); // Fetch Single User Data\n\n    const docRef = doc(db, 'Users', userId);\n    getDoc(docRef).then(doc => {\n      setUserData(doc.data());\n    });\n  }, []);\n  useEffect(() => {\n    var d;\n    data.map((ls, index) => {\n      let date_1 = new Date(ls.endDateforBiding);\n      let date_2 = new Date();\n\n      const days = (date_1, date_2) => {\n        let difference = date_1.getTime() - date_2.getTime();\n        let TotalDays = Math.ceil(difference / (1000 * 3600 * 24));\n        ls.endDateforBiding = TotalDays;\n        ls.ItemFirebaseId = ItemId[index];\n      };\n\n      days(date_1, date_2);\n    });\n    setArray(data.sort((first_Argument, second_Argument) => parseFloat(first_Argument.endDateforBiding) - parseFloat(second_Argument.endDateforBiding)));\n  }, [data]);\n\n  const handleItem = (e, i) => {// history.push({\n    //      pathname: \"/bid\",\n    //      state: { auctionItemData: e, ItemId: e.ItemFirebaseId }\n    // });\n  };\n\n  const handleDelete = Item => {\n    const docRef = doc(db, 'Auction', Item.ItemFirebaseId);\n    deleteDoc(docRef).then(() => {\n      toast.success(\"Item has deleted\");\n    }).catch(e => {\n      toast.error(\"Server encounter an unexception condition\");\n    });\n    setArray(array.filter(ls => ls.ItemFirebaseId != Item.ItemFirebaseId));\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NavBar, {\n    title: \"Current Auction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 16\n    }\n  }), loader ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"d-flex justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"spinner-grow d-flex \",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 36\n    }\n  }, \"Loading...\"))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 36\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 46\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 50\n    }\n  }, \"Product\")), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 46\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 50\n    }\n  }, \"Seller\")), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 46\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 50\n    }\n  }, \"Top Bid\")), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 46\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 50\n    }\n  }, \"Time Remaining\")), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 46\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 50\n    }\n  }, \"Delete\"))), array && array.map((item, index) =>\n  /*#__PURE__*/\n  // Conditional rendering if Date has passed\n  React.createElement(React.Fragment, null, item.endDateforBiding <= 0 ? null : /*#__PURE__*/React.createElement(\"tr\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 61\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 66\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/bid\",\n    state: {\n      auctionItemData: item,\n      ItemId: item.ItemFirebaseId\n    },\n    style: {\n      textDecoration: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 71\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 181\n    }\n  }, item.productName))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 66\n    }\n  }, item.sellerName), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 66\n    }\n  }, item.topBid), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 66\n    }\n  }, item.endDateforBiding), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 66\n    }\n  }, userDetail.userId === item.sellerID ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"delete\",\n    onClick: () => handleDelete(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 109\n    }\n  }, \"Delete\") : null)))))), /*#__PURE__*/React.createElement(\"footer\", {\n    className: \"lower_Home_Page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/newAuction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 36\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 59\n    }\n  }, \"New Auction\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 36\n    }\n  }, \"Your current wallet: \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"wallet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 60\n    }\n  }, userData === null || userData === void 0 ? void 0 : userData.wallet, \"$\"))))), /*#__PURE__*/React.createElement(Toaster, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }));\n}","map":{"version":3,"sources":["E:/Freelancing/Test/React-Firebase-Auth-master/src/components/home/Home.js"],"names":["React","useEffect","useState","Container","Table","Link","collection","getDocs","doc","getDoc","deleteDoc","toast","Toaster","db","NavBar","Home","userDetail","JSON","parse","localStorage","getItem","array","setArray","data","setData","loader","setLoader","ItemId","setItemId","userData","setUserData","userId","list","Ids","fetchData","querySnapshot","forEach","index","push","id","error","console","log","docRef","then","d","map","ls","date_1","Date","endDateforBiding","date_2","days","difference","getTime","TotalDays","Math","ceil","ItemFirebaseId","sort","first_Argument","second_Argument","parseFloat","handleItem","e","i","handleDelete","Item","success","catch","filter","item","auctionItemData","textDecoration","productName","sellerName","topBid","sellerID","wallet"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Container, Table } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { collection, getDocs, doc, getDoc, deleteDoc } from \"firebase/firestore\";\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { db } from '../../firebase';\r\nimport './homeStyle.css'\r\nimport NavBar from '../NavBar';\r\nexport default function Home() {\r\n     const userDetail = JSON.parse(localStorage.getItem('User'))\r\n     const [array, setArray] = useState([])\r\n     const [data, setData] = useState([])\r\n     const [loader, setLoader] = useState(true)\r\n     const [ItemId, setItemId] = useState([])\r\n     const [userData, setUserData] = useState()\r\n     const userId = JSON.parse(localStorage.getItem(\"UserID\"))\r\n     let list = []\r\n     let Ids = []\r\n\r\n     useEffect(() => {\r\n\r\n\r\n          //Get all the Data from the Firebase\r\n          const fetchData = async () => {\r\n               try {\r\n                    const querySnapshot = await getDocs(collection(db, \"Auction\"));\r\n                    querySnapshot.forEach((doc, index) => {\r\n                         list.push(doc.data())\r\n                         Ids.push(doc.id)\r\n                    })\r\n                    setItemId(Ids)\r\n                    setData(list)\r\n                    setLoader(false)\r\n               } catch (error) {\r\n                    console.log(\"The error is\", error)\r\n               }\r\n\r\n          }\r\n          fetchData()\r\n\r\n          // Fetch Single User Data\r\n          const docRef = doc(db, 'Users', userId)\r\n          getDoc(docRef)\r\n               .then((doc) => {\r\n                    setUserData(doc.data())\r\n               })\r\n     }, [])\r\n     useEffect(() => {\r\n          var d;\r\n          data.map((ls, index) => {\r\n               let date_1 = new Date(ls.endDateforBiding);\r\n               let date_2 = new Date();\r\n\r\n               const days = (date_1, date_2) => {\r\n                    let difference = date_1.getTime() - date_2.getTime();\r\n                    let TotalDays = Math.ceil(difference / (1000 * 3600 * 24));\r\n                    ls.endDateforBiding = TotalDays;\r\n                    ls.ItemFirebaseId = ItemId[index];\r\n               }\r\n               days(date_1, date_2)\r\n          })\r\n\r\n          setArray(data.sort((first_Argument, second_Argument) => parseFloat(first_Argument.endDateforBiding) - parseFloat(second_Argument.endDateforBiding)));\r\n     }, [data])\r\n\r\n     const handleItem = (e, i) => {\r\n\r\n          // history.push({\r\n          //      pathname: \"/bid\",\r\n          //      state: { auctionItemData: e, ItemId: e.ItemFirebaseId }\r\n          // });\r\n     }\r\n     const handleDelete = (Item) => {\r\n          const docRef = doc(db, 'Auction', Item.ItemFirebaseId)\r\n          deleteDoc(docRef)\r\n               .then(() => {\r\n                    toast.success(\"Item has deleted\")\r\n               })\r\n               .catch((e) => {\r\n                    toast.error(\"Server encounter an unexception condition\")\r\n               })\r\n          setArray(array.filter((ls)=> ls.ItemFirebaseId != Item.ItemFirebaseId))\r\n}\r\n\r\nreturn (\r\n\r\n\r\n     <Container>\r\n          <main>\r\n               <NavBar title=\"Current Auction\" />\r\n               {\r\n                    loader ?\r\n                         <div class=\"d-flex justify-content-center align-items-center\">\r\n                              <div class=\"spinner-grow d-flex \" role=\"status\">\r\n                                   <span class=\"sr-only\">Loading...</span>\r\n                              </div>\r\n                         </div>\r\n                         :\r\n                         <>\r\n                              <Table striped bordered hover >\r\n                                   <tbody>\r\n                                        <tr>\r\n                                             <td><b>Product</b></td>\r\n                                             <td><b>Seller</b></td>\r\n                                             <td><b>Top Bid</b></td>\r\n                                             <td><b>Time Remaining</b></td>\r\n                                             <td><b>Delete</b></td>\r\n\r\n\r\n                                        </tr>\r\n                                        {\r\n                                             array && array.map((item, index) =>\r\n                                                  // Conditional rendering if Date has passed\r\n                                                  <>\r\n                                                       {(item.endDateforBiding <= 0) ?\r\n                                                            null\r\n                                                            :\r\n                                                            <tr key={index}>\r\n\r\n                                                                 <td ><Link to='/bid' state={{auctionItemData: item, ItemId: item.ItemFirebaseId}} style={{textDecoration: \"none\"}}><span className=\"product\">{item.productName}</span></Link></td>\r\n                                                                 <td>{item.sellerName}</td>\r\n                                                                 <td>{item.topBid}</td>\r\n                                                                 <td>{item.endDateforBiding}</td>\r\n                                                                 <td>{userDetail.userId === item.sellerID ? <span className=\"delete\" onClick={() => handleDelete(item)}>Delete</span> : null}</td>\r\n                                                            </tr>\r\n                                                       }\r\n                                                  </>\r\n                                             )\r\n                                        }\r\n                                   </tbody>\r\n                              </Table>\r\n                              <footer className='lower_Home_Page'>\r\n                                   <Link to='/newAuction'><button type=\"button\" className=\"btn btn-primary\">New Auction</button></Link>\r\n                                   <p>Your current wallet: <span className='wallet'>{userData?.wallet}$</span></p>\r\n                              </footer>\r\n                         </>\r\n               }\r\n\r\n          </main>\r\n          <Toaster />\r\n     </Container>\r\n);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}